<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Character Learning</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap');
        .chinese-font {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .flip-card {
            perspective: 1000px;
        }
        .flip-card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        .flip-card-front, .flip-card-back {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .flip-card-back {
            transform: rotateY(180deg);
        }
        .memory-card {
            transition: transform 0.5s;
            transform-style: preserve-3d;
        }
        .memory-card.flipped {
            transform: rotateY(180deg);
        }
        .memory-card-front, .memory-card-back {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .memory-card-back {
            transform: rotateY(180deg);
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        .type-correct {
            color: #10B981;
        }
        .type-incorrect {
            color: #EF4444;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-green-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        // Updated HSK3 L3 & 4 vocabulary from screenshots
        const wordList = [
            // Lesson 3
            { id: 1, chinese: "è¡¬è¡«", pinyin: "chÃ¨n shÄn", english: "shirt", russian: "Ñ€ÑƒÐ±Ð°ÑˆÐºÐ°" },
            { id: 2, chinese: "æ”¾", pinyin: "fÃ ng", english: "to put, to place", russian: "ÐºÐ»Ð°ÑÑ‚ÑŒ, ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ" },
            { id: 3, chinese: "è¿˜æ˜¯", pinyin: "hÃ¡i shÃ¬", english: "or", russian: "Ð¸Ð»Ð¸" },
            { id: 4, chinese: "èŠ±", pinyin: "huÄ", english: "flower", russian: "Ñ†Ð²ÐµÑ‚Ð¾Ðº" },
            { id: 5, chinese: "æˆ–è€…", pinyin: "huÃ² zhÄ›", english: "(either...) or...", russian: "Ð¸Ð»Ð¸... Ð¸Ð»Ð¸..." },
            { id: 6, chinese: "è®°å¾—", pinyin: "jÃ¬ dÃ©", english: "to remember", russian: "Ð¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑŒ" },
            { id: 7, chinese: "è£¤å­", pinyin: "kÃ¹ zi", english: "pants", russian: "Ð±Ñ€ÑŽÐºÐ¸" },
            { id: 8, chinese: "ç»¿", pinyin: "lÇœ", english: "green", russian: "Ð·ÐµÐ»Ñ‘Ð½Ñ‹Ð¹" },
            { id: 9, chinese: "çˆ¬å±±", pinyin: "pÃ¡ shÄn", english: "to climb a mountain", russian: "Ð¿Ð¾Ð´Ð½Ð¸Ð¼Ð°Ñ‚ÑŒÑÑ Ð² Ð³Ð¾Ñ€Ñƒ" },
            { id: 10, chinese: "èˆ’æœ", pinyin: "shÅ« fu", english: "comfortable", russian: "ÑƒÐ´Ð¾Ð±Ð½Ñ‹Ð¹" },
            { id: 11, chinese: "ç”œ", pinyin: "tiÃ¡n", english: "sweet", russian: "ÑÐ»Ð°Ð´ÐºÐ¸Ð¹" },
            { id: 12, chinese: "æ¡", pinyin: "tiÃ¡o", english: "used for pants, dresses, etc.", russian: "ÑÑ‡Ñ‘Ñ‚Ð½Ð¾Ðµ ÑÐ»Ð¾Ð²Ð¾ Ð´Ð»Ñ Ð±Ñ€ÑŽÐº, Ð¿Ð»Ð°Ñ‚ÑŒÐµÐ²" },
            { id: 13, chinese: "å°å¿ƒ", pinyin: "xiÇŽo xÄ«n", english: "careful", russian: "Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð¶Ð½Ñ‹Ð¹" },
            { id: 14, chinese: "æ–°é²œ", pinyin: "xÄ«n xiÄn", english: "fresh", russian: "ÑÐ²ÐµÐ¶Ð¸Ð¹" },
            { id: 15, chinese: "é¥®æ–™", pinyin: "yÇn liÃ o", english: "drink, beverage", russian: "Ð½Ð°Ð¿Ð¸Ñ‚Ð¾Ðº" },
            { id: 16, chinese: "å…ƒ", pinyin: "yuÃ¡n", english: "unit of money", russian: "ÑŽÐ°Ð½ÑŒ (Ð´ÐµÐ½ÐµÐ¶Ð½Ð°Ñ ÐµÐ´Ð¸Ð½Ð¸Ñ†Ð°)" },
            { id: 17, chinese: "åª", pinyin: "zhÇ", english: "only, solely", russian: "Ñ‚Ð¾Ð»ÑŒÐºÐ¾, Ð¸ÑÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾" },
            
            // Lesson 4
            { id: 18, chinese: "æ¯”èµ›", pinyin: "bÇ sÃ i", english: "match, competition", russian: "ÑÐ¾Ñ€ÐµÐ²Ð½Ð¾Ð²Ð°Ð½Ð¸Ðµ, Ð¼Ð°Ñ‚Ñ‡" },
            { id: 19, chinese: "è¶…å¸‚", pinyin: "chÄo shÃ¬", english: "supermarket", russian: "ÑÑƒÐ¿ÐµÑ€Ð¼Ð°Ñ€ÐºÐµÑ‚" },
            { id: 20, chinese: "èªæ˜Ž", pinyin: "cÅng mÃ­ng", english: "clever, smart", russian: "ÑƒÐ¼Ð½Ñ‹Ð¹" },
            { id: 21, chinese: "è›‹ç³•", pinyin: "dÃ n gÄo", english: "cake", russian: "Ñ‚Ð¾Ñ€Ñ‚" },
            { id: 22, chinese: "é¥¿", pinyin: "Ã¨", english: "hungry", russian: "Ð³Ð¾Ð»Ð¾Ð´Ð½Ñ‹Ð¹" },
            { id: 23, chinese: "åˆ†", pinyin: "fÄ“n", english: "fen, a unit of money(=1/10 jiao)", russian: "Ñ„Ñ‹Ð½ÑŒ (Ð´ÐµÐ½ÐµÐ¶Ð½Ð°Ñ ÐµÐ´Ð¸Ð½Ð¸Ñ†Ð°)" },
            { id: 24, chinese: "å›žç­”", pinyin: "huÃ­ dÃ¡", english: "to answer", russian: "Ð¾Ñ‚Ð²ÐµÑ‡Ð°Ñ‚ÑŒ" },
            { id: 25, chinese: "å®¢äºº", pinyin: "kÃ¨ rÃ©n", english: "customer, guest", russian: "ÐºÐ»Ð¸ÐµÐ½Ñ‚, Ð³Ð¾ÑÑ‚ÑŒ" },
            { id: 26, chinese: "å¹´çº§", pinyin: "niÃ¡n jÃ­", english: "grade", russian: "ÐºÐ»Ð°ÑÑ, ÐºÑƒÑ€Ñ" },
            { id: 27, chinese: "å¹´è½»", pinyin: "niÃ¡n qÄ«ng", english: "young", russian: "Ð¼Ð¾Ð»Ð¾Ð´Ð¾Ð¹" },
            { id: 28, chinese: "åŠªåŠ›", pinyin: "nÇ” lÃ¬", english: "hard-working", russian: "ÑƒÑÐµÑ€Ð´Ð½Ñ‹Ð¹" },
            { id: 29, chinese: "çƒ­æƒ…", pinyin: "rÃ¨ qÃ­ng", english: "warm, enthusiastic", russian: "Ñ‚Ñ‘Ð¿Ð»Ñ‹Ð¹, Ð²Ð¾ÑÑ‚Ð¾Ñ€Ð¶ÐµÐ½Ð½Ñ‹Ð¹" },
            { id: 30, chinese: "è®¤çœŸ", pinyin: "rÃ¨n zhÄ“n", english: "serious, earnest", russian: "ÑÐµÑ€ÑŒÑ‘Ð·Ð½Ñ‹Ð¹, ÑƒÑÐµÑ€Ð´Ð½Ñ‹Ð¹" },
            { id: 31, chinese: "åˆ", pinyin: "yÃ²u", english: "and, again", russian: "Ð¸, ÑÐ½Ð¾Ð²Ð°" },
            { id: 32, chinese: "ç«™", pinyin: "zhÃ n", english: "to stand", russian: "ÑÑ‚Ð¾ÑÑ‚ÑŒ" },
            { id: 33, chinese: "ç…§ç‰‡", pinyin: "zhÃ o piÃ n", english: "photo", russian: "Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ" },
            { id: 34, chinese: "æ€»æ˜¯", pinyin: "zÇ’ng shÃ¬", english: "always", russian: "Ð²ÑÐµÐ³Ð´Ð°" }
        ];

        // Initialize progress tracking
        const initializeProgress = () => {
            const storedProgress = localStorage.getItem('chineseProgress');
            if (storedProgress) {
                return JSON.parse(storedProgress);
            } else {
                const initialProgress = {};
                wordList.forEach(word => {
                    initialProgress[word.id] = 0;
                });
                localStorage.setItem('chineseProgress', JSON.stringify(initialProgress));
                return initialProgress;
            }
        };

        // Speech synthesis function
        const speakText = (text, lang) => {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang;
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        };

        // Main App Component
        const App = () => {
            const [mode, setMode] = React.useState('flashcards');
            const [progress, setProgress] = React.useState(initializeProgress());
            
            // Calculate stats
            const masteredCount = Object.values(progress).filter(level => level >= 4).length;
            const masteryPercentage = Math.round((masteredCount / wordList.length) * 100);
            
            // Reset progress
            const resetProgress = () => {
                const newProgress = {};
                wordList.forEach(word => {
                    newProgress[word.id] = 0;
                });
                setProgress(newProgress);
                localStorage.setItem('chineseProgress', JSON.stringify(newProgress));
            };
            
            // Update progress
            const updateProgress = (wordId, change) => {
                const newProgress = { ...progress };
                newProgress[wordId] = Math.max(0, Math.min(5, newProgress[wordId] + change));
                setProgress(newProgress);
                localStorage.setItem('chineseProgress', JSON.stringify(newProgress));
            };
            
            // Render current mode
            const renderMode = () => {
                switch(mode) {
                    case 'flashcards':
                        return <Flashcards progress={progress} updateProgress={updateProgress} />;
                    case 'quiz':
                        return <Quiz progress={progress} updateProgress={updateProgress} />;
                    case 'typing':
                        return <Typing progress={progress} updateProgress={updateProgress} />;
                    case 'memory':
                        return <MemoryGame progress={progress} updateProgress={updateProgress} />;
                    default:
                        return <Flashcards progress={progress} updateProgress={updateProgress} />;
                }
            };
            
            return (
                <div className="container mx-auto px-4 py-8 max-w-6xl">
                    <header className="text-center mb-8">
                        <h1 className="text-4xl font-bold text-blue-600 mb-2">Chinese Character Learning</h1>
                        <p className="text-lg text-gray-600">HSK3 L 3 & 4 Vocabulary Practice</p>
                    </header>
                    
                    {/* Navigation */}
                    <nav className="flex flex-wrap justify-center gap-2 mb-8">
                        <button 
                            className={`px-4 py-2 rounded-lg font-medium transition-colors ${mode === 'flashcards' ? 'bg-blue-500 text-white' : 'bg-white text-blue-500 hover:bg-blue-100'}`}
                            onClick={() => setMode('flashcards')}
                        >
                            Flashcards
                        </button>
                        <button 
                            className={`px-4 py-2 rounded-lg font-medium transition-colors ${mode === 'quiz' ? 'bg-blue-500 text-white' : 'bg-white text-blue-500 hover:bg-blue-100'}`}
                            onClick={() => setMode('quiz')}
                        >
                            Quiz
                        </button>
                        <button 
                            className={`px-4 py-2 rounded-lg font-medium transition-colors ${mode === 'typing' ? 'bg-blue-500 text-white' : 'bg-white text-blue-500 hover:bg-blue-100'}`}
                            onClick={() => setMode('typing')}
                        >
                            Type It
                        </button>
                        <button 
                            className={`px-4 py-2 rounded-lg font-medium transition-colors ${mode === 'memory' ? 'bg-blue-500 text-white' : 'bg-white text-blue-500 hover:bg-blue-100'}`}
                            onClick={() => setMode('memory')}
                        >
                            Memory Game
                        </button>
                    </nav>
                    
                    {/* Progress Stats */}
                    <div className="bg-white rounded-xl shadow-md p-6 mb-8">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-xl font-bold text-gray-800">Your Progress</h2>
                            <button 
                                className="px-3 py-1 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors"
                                onClick={resetProgress}
                            >
                                Reset Progress
                            </button>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div className="text-center">
                                <p className="text-3xl font-bold text-blue-600">{masteredCount}</p>
                                <p className="text-gray-600">Words Mastered</p>
                            </div>
                            <div className="text-center">
                                <p className="text-3xl font-bold text-green-600">{masteryPercentage}%</p>
                                <p className="text-gray-600">Mastery Rate</p>
                            </div>
                            <div className="text-center">
                                <p className="text-3xl font-bold text-purple-600">{wordList.length}</p>
                                <p className="text-gray-600">Total Words</p>
                            </div>
                        </div>
                        <div className="mt-4">
                            <div className="flex justify-between text-sm text-gray-600 mb-1">
                                <span>Overall Progress</span>
                                <span>{masteryPercentage}%</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2.5">
                                <div 
                                    className="bg-blue-600 h-2.5 rounded-full progress-bar" 
                                    style={{ width: `${masteryPercentage}%` }}
                                ></div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Current Mode Component */}
                    {renderMode()}
                    
                    {/* Word List */}
                    <div className="bg-white rounded-xl shadow-md p-6 mt-8">
                        <h2 className="text-xl font-bold text-gray-800 mb-4">Vocabulary List</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            {wordList.map(word => (
                                <div key={word.id} className="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors">
                                    <div className="flex justify-between items-start">
                                        <div>
                                            <p className="text-2xl chinese-font text-gray-800">{word.chinese}</p>
                                            <p className="text-gray-500">{word.pinyin}</p>
                                            <p className="text-gray-700">{word.english}</p>
                                            <p className="text-gray-700">{word.russian}</p>
                                        </div>
                                        <div className="flex flex-col items-center">
                                            <div className="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm"
                                                style={{ 
                                                    backgroundColor: progress[word.id] >= 4 ? '#10B981' : 
                                                                    progress[word.id] >= 2 ? '#F59E0B' : '#EF4444'
                                                }}
                                            >
                                                {progress[word.id]}
                                            </div>
                                            <button 
                                                className="mt-2 text-blue-500 hover:text-blue-700"
                                                onClick={() => speakText(word.chinese, 'zh-CN')}
                                            >
                                                ðŸ”Š
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // Flashcards Component
        const Flashcards = ({ progress, updateProgress }) => {
            const [currentIndex, setCurrentIndex] = React.useState(0);
            const [isFlipped, setIsFlipped] = React.useState(false);
            
            const currentWord = wordList[currentIndex];
            
            // Keyboard shortcuts
            React.useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.code === 'Space') {
                        setIsFlipped(!isFlipped);
                    } else if (e.code === 'KeyK' && isFlipped) {
                        // Knew it
                        updateProgress(currentWord.id, 1);
                        nextCard();
                    } else if (e.code === 'KeyA' && isFlipped) {
                        // Again
                        updateProgress(currentWord.id, -1);
                        nextCard();
                    } else if (e.code === 'KeyV') {
                        // Voice
                        speakText(isFlipped ? currentWord.english : currentWord.chinese, isFlipped ? 'en-US' : 'zh-CN');
                    }
                };
                
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [isFlipped, currentIndex]);
            
            const nextCard = () => {
                setIsFlipped(false);
                setCurrentIndex((currentIndex + 1) % wordList.length);
            };
            
            const prevCard = () => {
                setIsFlipped(false);
                setCurrentIndex(currentIndex === 0 ? wordList.length - 1 : currentIndex - 1);
            };
            
            return (
                <div className="bg-white rounded-xl shadow-md p-6">
                    <h2 className="text-xl font-bold text-gray-800 mb-4 text-center">Flashcards</h2>
                    
                    <div className="flex flex-col items-center">
                        {/* Progress indicator */}
                        <div className="w-full max-w-md mb-4">
                            <div className="flex justify-between text-sm text-gray-600 mb-1">
                                <span>Card {currentIndex + 1} of {wordList.length}</span>
                                <span>Mastery: {progress[currentWord.id]}/5</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2.5">
                                <div 
                                    className="bg-blue-600 h-2.5 rounded-full progress-bar" 
                                    style={{ width: `${(progress[currentWord.id] / 5) * 100}%` }}
                                ></div>
                            </div>
                        </div>
                        
                        {/* Flashcard */}
                        <div 
                            className={`flip-card w-full max-w-md h-64 cursor-pointer ${isFlipped ? 'flipped' : ''}`}
                            onClick={() => setIsFlipped(!isFlipped)}
                        >
                            <div className="flip-card-inner w-full h-full">
                                {/* Front of card */}
                                <div className="flip-card-front bg-blue-50 rounded-xl shadow-md flex flex-col items-center justify-center p-6 border-2 border-blue-200">
                                    <p className="text-5xl chinese-font text-center text-gray-800 mb-4">{currentWord.chinese}</p>
                                    <p className="text-gray-500 text-center">Click or press Space to flip</p>
                                </div>
                                
                                {/* Back of card */}
                                <div className="flip-card-back bg-green-50 rounded-xl shadow-md flex flex-col items-center justify-center p-6 border-2 border-green-200">
                                    <p className="text-3xl chinese-font text-center text-gray-800 mb-2">{currentWord.chinese}</p>
                                    <p className="text-gray-500 mb-2">{currentWord.pinyin}</p>
                                    <p className="text-xl text-gray-700 mb-1">{currentWord.english}</p>
                                    <p className="text-lg text-gray-700">{currentWord.russian}</p>
                                    <p className="text-gray-500 text-center mt-4">Press K if you knew it, A to review again</p>
                                </div>
                            </div>
                        </div>
                        
                        {/* Controls */}
                        <div className="flex justify-center gap-4 mt-6">
                            <button 
                                className="px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors"
                                onClick={prevCard}
                            >
                                Previous
                            </button>
                            <button 
                                className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                                onClick={() => setIsFlipped(!isFlipped)}
                            >
                                {isFlipped ? 'Show Front' : 'Show Back'}
                            </button>
                            <button 
                                className="px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors"
                                onClick={nextCard}
                            >
                                Next
                            </button>
                        </div>
                        
                        {/* Action buttons */}
                        {isFlipped && (
                            <div className="flex justify-center gap-4 mt-4">
                                <button 
                                    className="px-4 py-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors"
                                    onClick={() => {
                                        updateProgress(currentWord.id, 1);
                                        nextCard();
                                    }}
                                >
                                    Knew It (K)
                                </button>
                                <button 
                                    className="px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors"
                                    onClick={() => {
                                        updateProgress(currentWord.id, -1);
                                        nextCard();
                                    }}
                                >
                                    Again (A)
                                </button>
                            </div>
                        )}
                        
                        {/* Voice button */}
                        <button 
                            className="mt-4 px-4 py-2 bg-purple-100 text-purple-600 rounded-lg hover:bg-purple-200 transition-colors flex items-center gap-2"
                            onClick={() => speakText(isFlipped ? currentWord.english : currentWord.chinese, isFlipped ? 'en-US' : 'zh-CN')}
                        >
                            <span>ðŸ”Š</span>
                            <span>Speak ({isFlipped ? 'English' : 'Chinese'})</span>
                        </button>
                        
                        {/* Keyboard shortcuts help */}
                        <div className="mt-6 text-sm text-gray-600 text-center">
                            <p>Keyboard Shortcuts: Space = Flip, K = Knew It, A = Again, V = Voice</p>
                        </div>
                    </div>
                </div>
            );
        };

        // Quiz Component
        const Quiz = ({ progress, updateProgress }) => {
            const [currentIndex, setCurrentIndex] = React.useState(0);
            const [selectedAnswer, setSelectedAnswer] = React.useState(null);
            const [isAnswered, setIsAnswered] = React.useState(false);
            const [score, setScore] = React.useState(0);
            
            const currentWord = wordList[currentIndex];
            
            // Generate multiple choice options
            const getOptions = () => {
                const correctAnswer = currentWord.english;
                const otherWords = wordList
                    .filter(word => word.id !== currentWord.id)
                    .sort(() => 0.5 - Math.random())
                    .slice(0, 3)
                    .map(word => word.english);
                
                const options = [correctAnswer, ...otherWords];
                return options.sort(() => 0.5 - Math.random());
            };
            
            const [options, setOptions] = React.useState(getOptions());
            
            React.useEffect(() => {
                setOptions(getOptions());
            }, [currentIndex]);
            
            const handleAnswer = (answer) => {
                if (isAnswered) return;
                
                setSelectedAnswer(answer);
                setIsAnswered(true);
                
                if (answer === currentWord.english) {
                    setScore(score + 1);
                    updateProgress(currentWord.id, 1);
                } else {
                    updateProgress(currentWord.id, -1);
                }
            };
            
            const nextQuestion = () => {
                setSelectedAnswer(null);
                setIsAnswered(false);
                setCurrentIndex((currentIndex + 1) % wordList.length);
            };
            
            return (
                <div className="bg-white rounded-xl shadow-md p-6">
                    <h2 className="text-xl font-bold text-gray-800 mb-4 text-center">Multiple Choice Quiz</h2>
                    
                    <div className="flex flex-col items-center">
                        {/* Progress and score */}
                        <div className="w-full max-w-md mb-6 flex justify-between">
                            <div>
                                <p className="text-gray-600">Question {currentIndex + 1} of {wordList.length}</p>
                                <p className="text-gray-600">Score: {score}/{currentIndex + 1}</p>
                            </div>
                            <div className="text-right">
                                <p className="text-gray-600">Mastery: {progress[currentWord.id]}/5</p>
                            </div>
                        </div>
                        
                        {/* Question */}
                        <div className="bg-blue-50 rounded-xl p-6 mb-6 w-full max-w-md text-center">
                            <p className="text-4xl chinese-font text-gray-800 mb-4">{currentWord.chinese}</p>
                            <button 
                                className="text-blue-500 hover:text-blue-700"
                                onClick={() => speakText(currentWord.chinese, 'zh-CN')}
                            >
                                ðŸ”Š Pronounce
                            </button>
                        </div>
                        
                        {/* Options */}
                        <div className="w-full max-w-md grid grid-cols-1 gap-3 mb-6">
                            {options.map((option, index) => (
                                <button
                                    key={index}
                                    className={`p-4 rounded-lg text-left transition-colors ${
                                        !isAnswered 
                                            ? 'bg-white border border-gray-300 hover:bg-gray-100' 
                                            : option === currentWord.english
                                                ? 'bg-green-100 border border-green-500 text-green-700'
                                                : option === selectedAnswer
                                                    ? 'bg-red-100 border border-red-500 text-red-700'
                                                    : 'bg-gray-100 border border-gray-300 text-gray-700'
                                    }`}
                                    onClick={() => handleAnswer(option)}
                                    disabled={isAnswered}
                                >
                                    {option}
                                </button>
                            ))}
                        </div>
                        
                        {/* Feedback and next button */}
                        {isAnswered && (
                            <div className="w-full max-w-md text-center">
                                {selectedAnswer === currentWord.english ? (
                                    <div className="bg-green-100 text-green-700 p-4 rounded-lg mb-4">
                                        <p className="font-bold">Correct!</p>
                                        <p>{currentWord.chinese} means "{currentWord.english}"</p>
                                        <p className="text-gray-600">{currentWord.russian}</p>
                                    </div>
                                ) : (
                                    <div className="bg-red-100 text-red-700 p-4 rounded-lg mb-4">
                                        <p className="font-bold">Incorrect</p>
                                        <p>{currentWord.chinese} means "{currentWord.english}"</p>
                                        <p className="text-gray-600">{currentWord.russian}</p>
                                    </div>
                                )}
                                
                                <button 
                                    className="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                                    onClick={nextQuestion}
                                >
                                    Next Question
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Typing Component
        const Typing = ({ progress, updateProgress }) => {
            const [currentIndex, setCurrentIndex] = React.useState(0);
            const [userInput, setUserInput] = React.useState('');
            const [isCorrect, setIsCorrect] = React.useState(null);
            
            const currentWord = wordList[currentIndex];
            
            const checkAnswer = () => {
                if (userInput.trim() === currentWord.chinese) {
                    setIsCorrect(true);
                    updateProgress(currentWord.id, 1);
                } else {
                    setIsCorrect(false);
                    updateProgress(currentWord.id, -1);
                }
            };
            
            const nextWord = () => {
                setUserInput('');
                setIsCorrect(null);
                setCurrentIndex((currentIndex + 1) % wordList.length);
            };
            
            const handleKeyPress = (e) => {
                if (e.key === 'Enter') {
                    if (isCorrect === null) {
                        checkAnswer();
                    } else {
                        nextWord();
                    }
                }
            };
            
            return (
                <div className="bg-white rounded-xl shadow-md p-6">
                    <h2 className="text-xl font-bold text-gray-800 mb-4 text-center">Type It</h2>
                    
                    <div className="flex flex-col items-center">
                        {/* Progress */}
                        <div className="w-full max-w-md mb-6 flex justify-between">
                            <p className="text-gray-600">Word {currentIndex + 1} of {wordList.length}</p>
                            <p className="text-gray-600">Mastery: {progress[currentWord.id]}/5</p>
                        </div>
                        
                        {/* Prompt */}
                        <div className="bg-blue-50 rounded-xl p-6 mb-6 w-full max-w-md text-center">
                            <p className="text-xl text-gray-700 mb-2">Type the Chinese characters for:</p>
                            <p className="text-2xl font-bold text-gray-800 mb-2">{currentWord.english}</p>
                            <p className="text-lg text-gray-700 mb-4">{currentWord.russian}</p>
                            <button 
                                className="text-blue-500 hover:text-blue-700"
                                onClick={() => speakText(currentWord.english, 'en-US')}
                            >
                                ðŸ”Š Pronounce English
                            </button>
                        </div>
                        
                        {/* Input and feedback */}
                        <div className="w-full max-w-md mb-6">
                            <input
                                type="text"
                                value={userInput}
                                onChange={(e) => setUserInput(e.target.value)}
                                onKeyPress={handleKeyPress}
                                className={`w-full p-4 text-2xl chinese-font text-center border-2 rounded-lg ${
                                    isCorrect === null 
                                        ? 'border-gray-300' 
                                        : isCorrect 
                                            ? 'border-green-500 bg-green-50' 
                                            : 'border-red-500 bg-red-50'
                                }`}
                                placeholder="Type here..."
                                disabled={isCorrect !== null}
                                autoFocus
                            />
                            
                            {isCorrect !== null && (
                                <div className={`mt-4 p-4 rounded-lg text-center ${
                                    isCorrect ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'
                                }`}>
                                    {isCorrect ? (
                                        <p className="font-bold">Correct! Well done!</p>
                                    ) : (
                                        <div>
                                            <p className="font-bold">Incorrect</p>
                                            <p>The correct answer is: <span className="text-2xl chinese-font">{currentWord.chinese}</span></p>
                                            <p className="text-gray-600">{currentWord.pinyin}</p>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                        
                        {/* Controls */}
                        <div className="flex justify-center gap-4">
                            {isCorrect === null ? (
                                <button 
                                    className="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                                    onClick={checkAnswer}
                                >
                                    Check Answer
                                </button>
                            ) : (
                                <button 
                                    className="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                                    onClick={nextWord}
                                >
                                    Next Word
                                </button>
                            )}
                        </div>
                        
                        {/* Hint */}
                        <div className="mt-6 text-sm text-gray-600 text-center">
                            <p>Press Enter to check your answer or move to the next word</p>
                        </div>
                    </div>
                </div>
            );
        };

        // Memory Game Component
        const MemoryGame = ({ progress, updateProgress }) => {
            const [cards, setCards] = React.useState([]);
            const [flippedCards, setFlippedCards] = React.useState([]);
            const [matchedCards, setMatchedCards] = React.useState([]);
            const [moves, setMoves] = React.useState(0);
            const [gameCompleted, setGameCompleted] = React.useState(false);
            
            // Initialize game
            React.useEffect(() => {
                startNewGame();
            }, []);
            
            const startNewGame = () => {
                // Select 8 random words
                const selectedWords = [...wordList]
                    .sort(() => 0.5 - Math.random())
                    .slice(0, 8);
                
                // Create card pairs
                const cardPairs = [];
                selectedWords.forEach((word, index) => {
                    // Chinese card
                    cardPairs.push({
                        id: index * 2,
                        type: 'chinese',
                        content: word.chinese,
                        wordId: word.id
                    });
                    
                    // English card
                    cardPairs.push({
                        id: index * 2 + 1,
                        type: 'english',
                        content: word.english,
                        wordId: word.id
                    });
                });
                
                // Shuffle cards
                const shuffledCards = cardPairs.sort(() => 0.5 - Math.random());
                setCards(shuffledCards);
                setFlippedCards([]);
                setMatchedCards([]);
                setMoves(0);
                setGameCompleted(false);
            };
            
            const handleCardClick = (id) => {
                // Don't allow more than 2 cards to be flipped
                if (flippedCards.length >= 2) return;
                
                // Don't allow flipping already matched or flipped cards
                if (matchedCards.includes(id) || flippedCards.includes(id)) return;
                
                const newFlippedCards = [...flippedCards, id];
                setFlippedCards(newFlippedCards);
                
                // Check for match if two cards are flipped
                if (newFlippedCards.length === 2) {
                    setMoves(moves + 1);
                    
                    const firstCard = cards.find(card => card.id === newFlippedCards[0]);
                    const secondCard = cards.find(card => card.id === newFlippedCards[1]);
                    
                    // Check if cards match (same wordId but different types)
                    if (firstCard.wordId === secondCard.wordId && firstCard.type !== secondCard.type) {
                        // Match found
                        setMatchedCards([...matchedCards, ...newFlippedCards]);
                        setFlippedCards([]);
                        
                        // Update progress for matched word
                        updateProgress(firstCard.wordId, 1);
                        
                        // Speak the word
                        const word = wordList.find(w => w.id === firstCard.wordId);
                        speakText(word.chinese, 'zh-CN');
                        
                        // Check if game is completed
                        if (matchedCards.length + 2 === cards.length) {
                            setGameCompleted(true);
                        }
                    } else {
                        // No match, flip back after a delay
                        setTimeout(() => {
                            setFlippedCards([]);
                        }, 1000);
                    }
                }
            };
            
            return (
                <div className="bg-white rounded-xl shadow-md p-6">
                    <h2 className="text-xl font-bold text-gray-800 mb-4 text-center">Memory Match Game</h2>
                    
                    <div className="flex flex-col items-center">
                        {/* Game stats */}
                        <div className="w-full max-w-2xl mb-6 flex justify-between">
                            <div>
                                <p className="text-gray-600">Moves: {moves}</p>
                                <p className="text-gray-600">Matches: {matchedCards.length / 2} / 8</p>
                            </div>
                            <button 
                                className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                                onClick={startNewGame}
                            >
                                New Game
                            </button>
                        </div>
                        
                        {/* Game board */}
                        <div className="grid grid-cols-4 gap-4 w-full max-w-2xl mb-6">
                            {cards.map(card => (
                                <div
                                    key={card.id}
                                    className={`memory-card aspect-square cursor-pointer rounded-xl ${
                                        flippedCards.includes(card.id) || matchedCards.includes(card.id) ? 'flipped' : ''
                                    }`}
                                    onClick={() => handleCardClick(card.id)}
                                >
                                    <div className="memory-card-front bg-blue-500 rounded-xl flex items-center justify-center text-white text-2xl font-bold shadow-md">
                                        ?
                                    </div>
                                    <div className={`memory-card-back rounded-xl flex items-center justify-center p-2 shadow-md ${
                                        card.type === 'chinese' ? 'bg-green-100' : 'bg-yellow-100'
                                    }`}>
                                        <p className={`text-center font-medium ${
                                            card.type === 'chinese' ? 'text-2xl chinese-font' : 'text-lg'
                                        }`}>
                                            {card.content}
                                        </p>
                                    </div>
                                </div>
                            ))}
                        </div>
                        
                        {/* Game completion message */}
                        {gameCompleted && (
                            <div className="bg-green-100 text-green-700 p-6 rounded-lg text-center max-w-md">
                                <p className="text-xl font-bold mb-2">Congratulations!</p>
                                <p className="mb-4">You've matched all pairs in {moves} moves!</p>
                                <button 
                                    className="px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                                    onClick={startNewGame}
                                >
                                    Play Again
                                </button>
                            </div>
                        )}
                        
                        {/* Instructions */}
                        <div className="text-sm text-gray-600 text-center mt-4">
                            <p>Match Chinese characters with their English translations</p>
                        </div>
                    </div>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
